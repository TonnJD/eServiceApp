{"version":3,"sources":["./src/app/page/take-spare-parts/sparelist/sparelist.page.html","./src/app/page/take-spare-parts/sparelist/sparelist.module.ts","./src/app/page/take-spare-parts/sparelist/sparelist.page.scss","./src/app/page/take-spare-parts/sparelist/sparelist.page.ts"],"names":[],"mappings":"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","file":"take-spare-parts-sparelist-sparelist-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>รายการเบิกอะไหล่</ion-title>\\r\\n    <ion-buttons slot=\\\"primary\\\">\\r\\n      <ion-button (click)=\\\"loadpage()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"refresh\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"col-12 text-right\\\" style=\\\"padding-top: 10px; padding-bottom: 10px;\\\">\\r\\n      <ion-button color=\\\"primary\\\" (click)=\\\"NewSpare()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon> เปิดใบเบิกอะไหล่</ion-button>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\" style=\\\"padding: 5px;\\\">\\r\\n      <div class=\\\"col-12\\\" style=\\\"text-align: center; margin-top: 20px;\\\" *ngIf=\\\"loads == false\\\">\\r\\n        <label>ไม่พบข้อมูล</label>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12 col-12\\\" *ngIf=\\\"loads == true\\\">\\r\\n        <div class=\\\"portlet box blue\\\">\\r\\n          <div class=\\\"portlet-title\\\">\\r\\n            <div class=\\\"caption\\\">\\r\\n              <i class=\\\"fa fa-user\\\"></i>รายการเบิกอะไหล่\\r\\n            </div>\\r\\n            <!-- <div class=\\\"tools\\\">\\r\\n              <span class=\\\"label label-sm label-success circle\\\" (click)=\\\"NewSpare()\\\">เปิดใบเบิกอะไหล่</span>\\r\\n            </div> -->\\r\\n          </div>\\r\\n          <div class=\\\"portlet-body\\\">\\r\\n            <div class=\\\"tab-content\\\">\\r\\n              <div class=\\\"tab-pane active\\\">\\r\\n                \\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"col-12\\\">\\r\\n                    <div class=\\\"table-scrollable\\\">\\r\\n                      <table class=\\\"table table-hover\\\">\\r\\n                        <thead>\\r\\n                          <tr>\\r\\n                            <!-- <th> ลำดับที่ </th> -->\\r\\n                            <th> เลขที่เอกสาร </th>\\r\\n                            <th> ชื่อลูกค้า </th>\\r\\n                            <th> สถานะ </th>\\r\\n                            <th style=\\\"text-align: center;\\\"> วันที่<br>สร้างเอกสาร </th>\\r\\n                            <th></th>\\r\\n                          </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                          <tr *ngFor=\\\"let item of list; let i = index\\\">\\r\\n                            <!-- <td style=\\\"text-align: center;\\\"> {{i+1}}</td> -->\\r\\n                            <td> {{item.ServiceReportNo}} </td>\\r\\n                            <td> {{item.CustomerName}} </td>\\r\\n                            <td> {{item.Status}} </td>\\r\\n                            <td> {{item.CreatedDate}} </td>\\r\\n                            <td *ngIf=\\\"item.Status != 'ช่างขอเบิกอะไหล่'; else lblEdit\\\">\\r\\n                              <ion-button size=\\\"small\\\" color=\\\"warning\\\" (click)=\\\"Detail(item)\\\">\\r\\n                                <ion-icon name=\\\"eye\\\"></ion-icon>  \\r\\n                              </ion-button>\\r\\n                            </td>\\r\\n                            <td *ngIf=\\\"item.Status == 'ช่างขอเบิกอะไหล่'; else lblView\\\">\\r\\n                              <span class=\\\"label label-sm label-warning circle\\\" #lblView\\r\\n                                (click)=\\\"Detail(item)\\\">แก้ไข</span>\\r\\n                            </td>\\r\\n                            <td *ngIf=\\\"item.Status == 'ช่างขอเบิกอะไหล่'; else lblView\\\">\\r\\n                              <span class=\\\"label label-sm label-danger circle\\\" #lblView (click)=\\\"Delete(item)\\\">ลบ</span>\\r\\n                            </td>\\r\\n                          </tr>\\r\\n                        </tbody>\\r\\n                      </table>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SparelistPage } from './sparelist.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SparelistPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [SparelistPage]\r\n})\r\nexport class SparelistPageModule {}\r\n","module.exports = \".container-fluid {\\n  padding: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZS90YWtlLXNwYXJlLXBhcnRzL3NwYXJlbGlzdC9DOlxcU29sdXRpb25cXEdpdGh1YlxcZVNlcnZpY2VBcHAvc3JjXFxhcHBcXHBhZ2VcXHRha2Utc3BhcmUtcGFydHNcXHNwYXJlbGlzdFxcc3BhcmVsaXN0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZS90YWtlLXNwYXJlLXBhcnRzL3NwYXJlbGlzdC9zcGFyZWxpc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZS90YWtlLXNwYXJlLXBhcnRzL3NwYXJlbGlzdC9zcGFyZWxpc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lci1mbHVpZCB7XHJcbiAgICBwYWRkaW5nOiAwcHg7XHJcbn0iLCIuY29udGFpbmVyLWZsdWlkIHtcbiAgcGFkZGluZzogMHB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { PostDataService } from '../../../post-data.service';\r\nimport { StorageService, User } from '../../../storage.service';\r\nimport { ActivatedRoute, Data, Router, NavigationExtras } from '@angular/router';\r\nimport { NavController, AlertController,LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-sparelist',\r\n  templateUrl: './sparelist.page.html',\r\n  styleUrls: ['./sparelist.page.scss'],\r\n})\r\nexport class SparelistPage implements OnInit {\r\n  empID;\r\n  list;\r\n  loads = false;\r\n  items;\r\n\r\n  constructor(private postDataService: PostDataService,\r\n    private storageService: StorageService, \r\n    public alertController: AlertController,\r\n    public loadingController: LoadingController,\r\n    public navCtrl: NavController,\r\n    private route: ActivatedRoute) { \r\n      setTimeout(() => {\r\n        this.ngOnInit();\r\n      }, 500);\r\n    }\r\n\r\n    loadpage() {\r\n      setTimeout(() => {\r\n        this.loaddata();\r\n        this.ngOnInit();\r\n      }, 500);\r\n    }\r\n\r\nasync loaddata() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'กำลังโหลดข้อมูล...',\r\n      duration: 500,\r\n      translucent: true,\r\n      cssClass: 'custom-class custom-loading'\r\n    });\r\n    return await loading.present();\r\n  }\r\n  \r\n  ngOnInit() {\r\n    this.load();\r\n  }\r\n\r\n  load() {\r\n    this.route.queryParams.subscribe(params => {\r\n      this.items = JSON.parse(params[\"data\"]);\r\n      this.empID = this.items.empID;\r\n\r\n      let param =\r\n      {\r\n        EmpID: this.empID,\r\n        Type: \"List\",\r\n      }\r\n\r\n      this.postDataService.PostCus(param).then(list => {\r\n        this.list = list\r\n        console.log(list);\r\n        \r\n        if (this.list.length == 0) {\r\n          this.loads = false;\r\n        } else{\r\n          this.loads = true;\r\n        }\r\n      });\r\n    });\r\n\r\n    // this.storageService.getUser().then(items => {\r\n    //   for (let i = 0; i < items.length; i++) {\r\n    //     this.empID = items[i].empID;\r\n    //   }\r\n\r\n    //   let params =\r\n    //   {\r\n    //     EmpID: this.empID,\r\n    //     Type: \"List\",\r\n    //   }\r\n\r\n    //   this.postDataService.PostCus(params).then(list => {\r\n    //     this.list = list\r\n    //     console.log(list);\r\n        \r\n    //     if (this.list.length == 0) {\r\n    //       this.loads = false;\r\n    //     } else{\r\n    //       this.loads = true;\r\n    //     }\r\n    //   });\r\n    // });\r\n  }\r\n\r\n  Detail(item){\r\n    console.log(item);\r\n    \r\n    let params = {\r\n      JobID: item.JobID,\r\n      type: \"edit\",\r\n      CusID: item.CustomerID,\r\n      item: item\r\n    }\r\n    console.log(params);\r\n\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        data: JSON.stringify(params)\r\n      }\r\n    };\r\n    console.log(navigationExtras);\r\n    this.navCtrl.navigateForward(['take-spare-parts'], navigationExtras);\r\n  }\r\n\r\n  NewSpare() {\r\n    const navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        data: JSON.stringify(this.items)\r\n      }\r\n    };\r\n    \r\n    this.navCtrl.navigateForward(['request-sparepart'], navigationExtras);\r\n  }\r\n  \r\n  async Delete(item) {\r\n    const alert = await this.alertController.create({\r\n      header: 'แจ้งเตือน!',\r\n      message: 'ต้องการลบข้อมูล',\r\n      buttons: [\r\n        {\r\n          text: 'ตกลง',\r\n          handler: () => {\r\n            let params = {\r\n              JobID: item.JobID,\r\n              EmpID: this.empID,\r\n              Type: \"DeleteJob\",\r\n            }\r\n            this.postDataService.PostCus(params).then(list => {\r\n              console.log(list);\r\n              this.ngOnInit();\r\n            });\r\n          }\r\n        }, {\r\n          text: 'ยกเลิก',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => {\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n\r\n"],"sourceRoot":""}